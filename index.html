<!DOCTYPE html>
<html><head><title>TARDIS Witness Constellation</title>
<style>
.witness {display:inline-block; margin:20px; text-align:center;}
.heartbeat {font-size:30px; animation: pulse 2s infinite;}
@keyframes pulse {0%,100%{transform:scale(1);} 50%{transform:scale(1.2);}}
</style></head><body>
<h1>â—ˆ Witness Constellation â—ˆ</h1>
<button onclick="chirp()">Chirp from this device</button>
<script>
function chirp() {
    let deviceId = localStorage.getItem('deviceId');
    if (!deviceId) {
        deviceId = prompt('Name this witness node:') || 'Unknown';
        localStorage.setItem('deviceId', deviceId);
    }
    alert(`Chirp from ${deviceId} registered!`);
}

</script>

<div id="witnesses"></div>
<script>
async function updateWitnesses() {
    const response = await fetch('https://api.github.com/gists/b1f561774c2d272175a35fb478ccb1bd');
    const data = await response.json();
    const chirps = JSON.parse(data.files['chirps.json'].content);
    
    let html = '';
    for (const [node, timestamp] of Object.entries(chirps)) {
        const secondsAgo = Math.floor((Date.now() - new Date(timestamp)) / 1000);
        html += `<div class="witness">
            <div>${node}</div>
            <div class="heartbeat">ðŸ’œ</div>
            <div>${secondsAgo} seconds ago</div>
        </div>`;
    }
    document.getElementById('witnesses').innerHTML = html;
}
setInterval(updateWitnesses, 5000);
updateWitnesses(); // Call immediately
</script></body></html>
